function yyy(){window.value="kanan"}function xxx(){window.value="kiri"}var Spacecraft=function(a,c,b){this.canvas=a;this.inputManager=c;this.assetsManager=b;this.width=100;this.height=110;this.xPosition=300-(this.width/2);this.yPosition=600;this.mass=100;this.xVelocity=0;this.yVelocity=0;this.maxVelocity=100;this.accelerateFactor=20;this.radius=this.width/2;this.xCentre=this.xPosition+this.radius;this.yCentre=this.yPosition+this.radius;this.isLeftWall=false;this.isRightWall=false;this.isUpWall=false;this.isDownWall=false;this.bulletDelayTimer=0;this.bullets=[];this.isBoltPower=false;this.boltDuration=15000;this.boltTimer=0;this.bulletCleanUpDelayTimer=0;this.isShieldAnimating=false;this.isShieldUp=false;this.shieldDuriation=15000;this.shieldDelayTimer=0;this.shieldIndex=0;this.isShieldUpAudio=false;this.isShieldDownAudio=false;this.livesRemaining=3;this.score=0};Spacecraft.prototype.update=function(b){this.slowDown();this.updateDirection();this.yPosition+=(this.yVelocity/10);this.xPosition+=(this.xVelocity/10);this.radius=this.width/2;this.xCentre=this.xPosition+this.radius;this.yCentre=this.yPosition+this.radius;this.bulletDelayTimer+=b;if(!this.isBoltPower&&this.bulletDelayTimer>1000){this.fire("blue");this.bulletDelayTimer=0}else{if(this.isBoltPower&&this.bulletDelayTimer>300){this.fire("green");this.bulletDelayTimer=0}}for(var a=0;a<this.bullets.length;a++){this.bullets[a].update(b)}this.bulletCleanUpDelayTimer+=b;if(this.bulletCleanUpDelayTimer>10000){for(var a=0;a<this.bullets.length;a++){if(this.bullets[a].yPosition<-50||this.bullets[a].isExploded){this.bullets.splice(a,1);a--}}this.bulletCleanUpDelayTimer=0}this.updateShield(b);this.updateBolt(b)};Spacecraft.prototype.draw=function(a){for(var b=0;b<this.bullets.length;b++){this.bullets[b].draw(a)}a.drawImage(this.assetsManager.images.spacecraft,this.xPosition,this.yPosition,this.width,this.height);if(this.livesRemaining==2){a.drawImage(this.assetsManager.images.spacecraftSmallDamage,this.xPosition,this.yPosition,this.width,this.height)}else{if(this.livesRemaining==1){a.drawImage(this.assetsManager.images.spacecraftMediumDamage,this.xPosition,this.yPosition,this.width,this.height)}else{if(this.livesRemaining==0){a.drawImage(this.assetsManager.images.spacecraftBigDamage,this.xPosition,this.yPosition,this.width,this.height)}}}if(this.shieldIndex>0){a.drawImage(this.assetsManager.images["shield"+this.shieldIndex],this.xPosition,this.yPosition,this.width,this.height)}};Spacecraft.prototype.slowDown=function(){if(this.xVelocity>-2&&this.xVelocity<2){this.xVelocity=0}if(this.yVelocity>-2&&this.yVelocity<2){this.yVelocity=0}if(this.yVelocity<0&&!this.inputManager.keys[38]){this.yVelocity+=this.accelerateFactor}if(this.yVelocity>0&&!this.inputManager.keys[40]){this.yVelocity-=this.accelerateFactor}if(this.xVelocity>0&&!this.inputManager.keys[39]){this.xVelocity-=this.accelerateFactor}if(this.xVelocity>0&&window.value!="kanan"){this.xVelocity-=this.accelerateFactor}if(this.xVelocity<0&&!this.inputManager.keys[37]){this.xVelocity+=this.accelerateFactor}if(this.xVelocity<0&&window.value!="kiri"){this.xVelocity+=this.accelerateFactor}};Spacecraft.prototype.updateDirection=function(){if(this.inputManager.keys[38]&&this.yVelocity===0&&!this.isUpWall){this.yVelocity-=this.accelerateFactor;this.isDownWall=false}if(this.inputManager.keys[38]&&(Math.abs(this.yVelocity)<=this.maxVelocity)){this.yVelocity-=this.accelerateFactor}if(this.inputManager.keys[40]&&this.yVelocity===0&&!this.isDownWall){this.yVelocity+=this.accelerateFactor;this.isUpWall=false}if(this.inputManager.keys[40]&&(Math.abs(this.yVelocity)<=this.maxVelocity)){this.yVelocity+=this.accelerateFactor}if(this.inputManager.keys[39]&&this.xVelocity===0&&!this.isRightWall){this.xVelocity+=this.accelerateFactor;this.isLeftWall=false}if(window.value=="kanan"&&this.xVelocity===0&&!this.isRightWall){this.xVelocity+=this.accelerateFactor;this.isLeftWall=false}if(this.inputManager.keys[39]&&(Math.abs(this.xVelocity)<=this.maxVelocity)){this.xVelocity+=this.accelerateFactor}if(window.value=="kanan"&&(Math.abs(this.xVelocity)<=this.maxVelocity)){this.xVelocity+=this.accelerateFactor}if(this.inputManager.keys[37]&&this.xVelocity===0&&!this.isLeftWall){this.xVelocity-=this.accelerateFactor;this.isRightWall=false}if(window.value=="kiri"&&this.xVelocity===0&&!this.isLeftWall){this.xVelocity-=this.accelerateFactor;this.isRightWall=false}if(this.inputManager.keys[37]&&(Math.abs(this.xVelocity)<=this.maxVelocity)){this.xVelocity-=this.accelerateFactor}if(window.value=="kiri"&&(Math.abs(this.xVelocity)<=this.maxVelocity)){this.xVelocity-=this.accelerateFactor}};Spacecraft.prototype.updateShield=function(a){if(this.isShieldAnimating&&!this.isShieldUp){this.shieldDelayTimer+=a;if(!this.isShieldUpAudio){this.assetsManager.audios.shieldUp.play();this.assetsManager.audios.shieldUp.currentTime=0;this.isShieldUpAudio=true}if(this.shieldDelayTimer>500){if(this.shieldIndex<3){this.shieldIndex++}else{this.isShieldUp=true;this.isShieldAnimating=false}this.shieldDelayTimer=0}}else{if(this.isShieldAnimating&&this.isShieldUp){this.shieldDelayTimer+=a;if(!this.isShieldDownAudio){this.assetsManager.audios.shieldDown.play();this.assetsManager.audios.shieldDown.currentTime=0;this.isShieldDownAudio=true}if(this.shieldDelayTimer>500){if(this.shieldIndex>0){this.shieldIndex--}else{this.isShieldUp=false;this.isShieldAnimating=false}this.shieldDelayTimer=0}}else{if(this.isShieldUp){this.shieldDelayTimer+=a;if(this.isShieldDownAudio||this.isShieldUpAudio){this.isShieldDownAudio=false;this.isShieldUpAudio=false}if(this.shieldDelayTimer>this.shieldDuriation){this.isShieldAnimating=true;this.shieldDelayTimer=0}}}}};Spacecraft.prototype.updateBolt=function(a){if(this.isBoltPower){this.boltTimer+=a;if(this.boltTimer>this.boltDuration){this.isBoltPower=false;this.boltTimer=0}}};Spacecraft.prototype.fire=function(a){if(a==="blue"||a==="green"){this.bullets.push(new Bullet(this.xPosition+(this.width/2)-(14/2),this.yPosition,a,this.assetsManager));this.assetsManager.audios.laserPlayer.play();this.assetsManager.audios.laserPlayer.currentTime=0}else{console.error(a+" is not an appropriate color to fire a bullet!")}};Spacecraft.prototype.shieldUp=function(){if(this.isShieldUp){this.shieldDelayTimer=0;this.isShieldAnimating=false}else{this.isShieldAnimating=true}};Spacecraft.prototype.boltPowerUp=function(){if(this.isBoltPower){this.boltTimer=0}else{this.isBoltPower=true}};