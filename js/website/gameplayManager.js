var GameplayManager=function(a){this.canvas=a.canvas;this.assetsManager=a.assetsManager;this.meteors=a.meteors;this.enemies=a.enemies;this.spacecraft=a.spacecraft;this.enemiesSpawnDelay=5000;this.enemiesSpawnDelayMin=1000;this.enemiesSpawnDelayTimer=0;this.meteorsSpawnDelay=3000;this.meteorsSpawnDelayMin=1000;this.meteorsSpawnDelayTimer=0;this.cleanUpDelay=15000;this.cleanUpDelayTimer=0;this.difficultyDelay=30000;this.difficultyDelayTimer=0};GameplayManager.prototype.update=function(b){this.spawnMeteors(b);this.spawnEnemies(b);this.cleanUpDelayTimer+=b;if(this.cleanUpDelayTimer>this.cleanUpDelay){for(var a=0;a<this.enemies.length;a++){if(this.isOffCanvas(this.enemies[a])){this.enemies.splice(a,1);a--}}for(var a=0;a<this.meteors.length;a++){if(this.meteors[a].isExploded||this.isOffCanvas(this.meteors[a])){this.meteors.splice(a,1);a--}}this.cleanUpDelayTimer=0}this.increaseDifficulty(b)};GameplayManager.prototype.spawnMeteors=function(a){this.meteorsSpawnDelayTimer+=a;if(this.meteorsSpawnDelayTimer>this.meteorsSpawnDelay){this.meteors.push(new Meteor(this.getMeteorXCentre(),this.getMeteorYCentre(),this.getMeteorType(),this.assetsManager));this.meteorsSpawnDelayTimer=0}};GameplayManager.prototype.spawnEnemies=function(a){this.enemiesSpawnDelayTimer+=a;if(this.enemiesSpawnDelayTimer>this.enemiesSpawnDelay){this.enemies.push(new Enemy(this.getEnemyXPosition(),this.getEnemyYPosition(),this.getEnemyType(),this.assetsManager,this.spacecraft));this.enemiesSpawnDelayTimer=0}};GameplayManager.prototype.spawnPowerUps=function(a){this.powerUpsSpawnDelayTimer+=a;if(this.powerUpsSpawnDelayTimer>this.powerUpsSpawnDelay){this.powerUps.push(new PowerUp(this.getPowerUpXPosition(),this.getPowerUpYPosition(),this.getPowerUpType(),this.assetsManager));this.powerUpsSpawnDelayTimer=0}};GameplayManager.prototype.increaseDifficulty=function(a){this.difficultyDelayTimer+=a;if(this.difficultyDelayTimer>this.difficultyDelay){if(this.meteorsSpawnDelay>this.meteorsSpawnDelayMin){this.meteorsSpawnDelay-=200}if(this.enemiesSpawnDelay>this.enemiesSpawnDelayMin){this.enemiesSpawnDelay-=200}this.difficultyDelayTimer=0}};GameplayManager.prototype.getMeteorXCentre=function(){return this.getIntegerBetween(100,this.canvas.width-100)};GameplayManager.prototype.getMeteorYCentre=function(){return this.getIntegerBetween(-60,-50)};GameplayManager.prototype.getMeteorType=function(){var a=this.getIntegerBetween(0,2);if(a===0){return"big"}else{if(a===1){return"medium"}else{return"tiny"}}};GameplayManager.prototype.getEnemyXPosition=function(){return this.getIntegerBetween(100,this.canvas.width-100)};GameplayManager.prototype.getEnemyYPosition=function(){return this.getIntegerBetween(-60,-50)};GameplayManager.prototype.getEnemyType=function(){var a=this.getIntegerBetween(0,3);if(a===0){return"enemyBlue"}else{if(a===1){return"enemyRed"}else{if(a===2){return"enemyGreen"}else{return"enemyBlack"}}}};GameplayManager.prototype.getPowerUpXPosition=function(){return this.getIntegerBetween(100,this.canvas.width-100)};GameplayManager.prototype.getPowerUpYPosition=function(){return this.getIntegerBetween(100,this.canvas.height-100)};GameplayManager.prototype.getPowerUpType=function(){var a=this.getIntegerBetween(0,1);return a===0?"shieldPower":"boltPower"};GameplayManager.prototype.isOffCanvas=function(a){return a.xPosition<-300||a.xPosition>this.canvas.width+300||a.yPosition<-300||a.yPosition>this.canvas.height+300};GameplayManager.prototype.getIntegerBetween=function(b,a){return Math.floor(Math.random()*(a-b+1))+b};