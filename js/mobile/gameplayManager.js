var GameplayManager=function(e){this.canvas=e.canvas,this.assetsManager=e.assetsManager,this.meteors=e.meteors,this.enemies=e.enemies,this.spacecraft=e.spacecraft,this.enemiesSpawnDelay=5e3,this.enemiesSpawnDelayMin=1e3,this.enemiesSpawnDelayTimer=0,this.meteorsSpawnDelay=3e3,this.meteorsSpawnDelayMin=1e3,this.meteorsSpawnDelayTimer=0,this.cleanUpDelay=15e3,this.cleanUpDelayTimer=0,this.difficultyDelay=3e4,this.difficultyDelayTimer=0};GameplayManager.prototype.update=function(e){if(this.spawnMeteors(e),this.spawnEnemies(e),this.cleanUpDelayTimer+=e,this.cleanUpDelayTimer>this.cleanUpDelay){for(var t=0;t<this.enemies.length;t++)this.isOffCanvas(this.enemies[t])&&(this.enemies.splice(t,1),t--);for(var t=0;t<this.meteors.length;t++)(this.meteors[t].isExploded||this.isOffCanvas(this.meteors[t]))&&(this.meteors.splice(t,1),t--);this.cleanUpDelayTimer=0}this.increaseDifficulty(e)},GameplayManager.prototype.spawnMeteors=function(e){this.meteorsSpawnDelayTimer+=e,this.meteorsSpawnDelayTimer>this.meteorsSpawnDelay&&(this.meteors.push(new Meteor(this.getMeteorXCentre(),this.getMeteorYCentre(),this.getMeteorType(),this.assetsManager)),this.meteorsSpawnDelayTimer=0)},GameplayManager.prototype.spawnEnemies=function(e){this.enemiesSpawnDelayTimer+=e,this.enemiesSpawnDelayTimer>this.enemiesSpawnDelay&&(this.enemies.push(new Enemy(this.getEnemyXPosition(),this.getEnemyYPosition(),this.getEnemyType(),this.assetsManager,this.spacecraft)),this.enemiesSpawnDelayTimer=0)},GameplayManager.prototype.spawnPowerUps=function(e){this.powerUpsSpawnDelayTimer+=e,this.powerUpsSpawnDelayTimer>this.powerUpsSpawnDelay&&(this.powerUps.push(new PowerUp(this.getPowerUpXPosition(),this.getPowerUpYPosition(),this.getPowerUpType(),this.assetsManager)),this.powerUpsSpawnDelayTimer=0)},GameplayManager.prototype.increaseDifficulty=function(e){this.difficultyDelayTimer+=e,this.difficultyDelayTimer>this.difficultyDelay&&(this.meteorsSpawnDelay>this.meteorsSpawnDelayMin&&(this.meteorsSpawnDelay-=200),this.enemiesSpawnDelay>this.enemiesSpawnDelayMin&&(this.enemiesSpawnDelay-=200),this.difficultyDelayTimer=0)},GameplayManager.prototype.getMeteorXCentre=function(){return this.getIntegerBetween(100,this.canvas.width-100)},GameplayManager.prototype.getMeteorYCentre=function(){return this.getIntegerBetween(-60,-50)},GameplayManager.prototype.getMeteorType=function(){var e=this.getIntegerBetween(0,2);return 0===e?"big":1===e?"medium":"tiny"},GameplayManager.prototype.getEnemyXPosition=function(){return this.getIntegerBetween(100,this.canvas.width-100)},GameplayManager.prototype.getEnemyYPosition=function(){return this.getIntegerBetween(-60,-50)},GameplayManager.prototype.getEnemyType=function(){var e=this.getIntegerBetween(0,3);return 0===e?"enemyBlue":1===e?"enemyRed":2===e?"enemyGreen":"enemyBlack"},GameplayManager.prototype.getPowerUpXPosition=function(){return this.getIntegerBetween(100,this.canvas.width-100)},GameplayManager.prototype.getPowerUpYPosition=function(){return this.getIntegerBetween(100,this.canvas.height-100)},GameplayManager.prototype.getPowerUpType=function(){var e=this.getIntegerBetween(0,1);return 0===e?"shieldPower":"boltPower"},GameplayManager.prototype.isOffCanvas=function(e){return e.xPosition<-300||e.xPosition>this.canvas.width+300||e.yPosition<-300||e.yPosition>this.canvas.height+300},GameplayManager.prototype.getIntegerBetween=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};