var Spacecraft=function(i,t,s){this.canvas=i,this.inputManager=t,this.assetsManager=s,this.width=90,this.height=90,this.xPosition=600,this.yPosition=600,this.mass=100,this.xVelocity=0,this.yVelocity=0,this.maxVelocity=100,this.accelerateFactor=40,this.radius=this.width/2,this.xCentre=this.xPosition+this.radius,this.yCentre=this.yPosition+this.radius,this.isLeftWall=!1,this.isRightWall=!1,this.isUpWall=!1,this.isDownWall=!1,this.bulletDelayTimer=0,this.bullets=[],this.isBoltPower=!1,this.boltDuration=15e3,this.boltTimer=0,this.bulletCleanUpDelayTimer=0,this.isShieldAnimating=!1,this.isShieldUp=!1,this.shieldDuriation=15e3,this.shieldDelayTimer=0,this.shieldIndex=0,this.isShieldUpAudio=!1,this.isShieldDownAudio=!1,this.livesRemaining=3,this.score=0};Spacecraft.prototype.update=function(i){this.slowDown(),this.updateDirection(),this.yPosition+=this.yVelocity/10,this.xPosition+=this.xVelocity/10,this.radius=this.width/2,this.xCentre=this.xPosition+this.radius,this.yCentre=this.yPosition+this.radius,this.bulletDelayTimer+=i,!this.isBoltPower&&this.bulletDelayTimer>1e3?(this.fire("blue"),this.bulletDelayTimer=0):this.isBoltPower&&this.bulletDelayTimer>300&&(this.fire("green"),this.bulletDelayTimer=0);for(var t=0;t<this.bullets.length;t++)this.bullets[t].update(i);if(this.bulletCleanUpDelayTimer+=i,this.bulletCleanUpDelayTimer>1e4){for(var t=0;t<this.bullets.length;t++)(this.bullets[t].yPosition<-50||this.bullets[t].isExploded)&&(this.bullets.splice(t,1),t--);this.bulletCleanUpDelayTimer=0}this.updateShield(i),this.updateBolt(i)},Spacecraft.prototype.draw=function(i){for(var t=0;t<this.bullets.length;t++)this.bullets[t].draw(i);i.drawImage(this.assetsManager.images.spacecraft,this.xPosition,this.yPosition,this.width,this.height),2==this.livesRemaining?i.drawImage(this.assetsManager.images.spacecraftSmallDamage,this.xPosition,this.yPosition,this.width,this.height):1==this.livesRemaining?i.drawImage(this.assetsManager.images.spacecraftMediumDamage,this.xPosition,this.yPosition,this.width,this.height):0==this.livesRemaining&&i.drawImage(this.assetsManager.images.spacecraftBigDamage,this.xPosition,this.yPosition,this.width,this.height),this.shieldIndex>0&&i.drawImage(this.assetsManager.images["shield"+this.shieldIndex],this.xPosition,this.yPosition,this.width,this.height)},Spacecraft.prototype.slowDown=function(){this.xVelocity>-2&&this.xVelocity<2&&(this.xVelocity=0),this.yVelocity>-2&&this.yVelocity<2&&(this.yVelocity=0),this.yVelocity<0&&!this.inputManager.keys[38]&&(this.yVelocity+=this.accelerateFactor),this.yVelocity<0&&"atas"!=window.value&&(this.yVelocity+=this.accelerateFactor),this.yVelocity>0&&!this.inputManager.keys[40]&&(this.yVelocity-=this.accelerateFactor),this.yVelocity>0&&"bawah"!=window.value&&(this.yVelocity-=this.accelerateFactor),this.xVelocity>0&&!this.inputManager.keys[39]&&(this.xVelocity-=this.accelerateFactor),this.xVelocity>0&&"kanan"!=window.value&&(this.xVelocity-=this.accelerateFactor),this.xVelocity<0&&!this.inputManager.keys[37]&&(this.xVelocity+=this.accelerateFactor),this.xVelocity<0&&"kiri"!=window.value&&(this.xVelocity+=this.accelerateFactor)},Spacecraft.prototype.updateDirection=function(){"kananatas"!=window.value||0!==this.yVelocity||this.isUpWall||(this.yVelocity-=this.accelerateFactor,this.isDownWall=!1),"kananatas"==window.value&&Math.abs(this.yVelocity)<=this.maxVelocity&&(this.yVelocity-=this.accelerateFactor),"kananatas"!=window.value||0!==this.xVelocity||this.isRightWall||(this.xVelocity+=this.accelerateFactor),"kiriatas"!=window.value||0!==this.yVelocity||this.isUpWall||(this.yVelocity-=this.accelerateFactor,this.isDownWall=!1),"kiriatas"==window.value&&Math.abs(this.yVelocity)<=this.maxVelocity&&(this.yVelocity-=this.accelerateFactor),"kiriatas"!=window.value||0!==this.xVelocity||this.isLeftWall||(this.xVelocity-=this.accelerateFactor),"kiribawah"!=window.value||0!==this.xVelocity||this.isUpWall||(this.xVelocity-=this.accelerateFactor,this.isDownWall=!1),"kiribawah"==window.value&&Math.abs(this.xVelocity)<=this.maxVelocity&&(this.xVelocity-=this.accelerateFactor),"kiribawah"!=window.value||0!==this.yVelocity||this.isLeftWall||(this.yVelocity+=this.accelerateFactor),"kananbawah"!=window.value||0!==this.yVelocity||this.isDownWall||(this.yVelocity+=this.accelerateFactor,this.isUpWall=!1),"kananbawah"==window.value&&Math.abs(this.yVelocity)<=this.maxVelocity&&(this.yVelocity+=this.accelerateFactor),"kananbawah"!=window.value||0!==this.xVelocity||this.isRightWall||(this.xVelocity+=this.accelerateFactor),"atas"!=window.value||0!==this.yVelocity||this.isUpWall||(this.yVelocity-=this.accelerateFactor,this.isDownWall=!1),"atas"==window.value&&Math.abs(this.yVelocity)<=this.maxVelocity&&(this.yVelocity-=this.accelerateFactor),"bawah"!=window.value||0!==this.yVelocity||this.isDownWall||(this.yVelocity+=this.accelerateFactor,this.isUpWall=!1),"bawah"==window.value&&Math.abs(this.yVelocity)<=this.maxVelocity&&(this.yVelocity+=this.accelerateFactor),"kanan"!=window.value||0!==this.xVelocity||this.isRightWall||(this.xVelocity+=this.accelerateFactor,this.isLeftWall=!1),"kanan"==window.value&&Math.abs(this.xVelocity)<=this.maxVelocity&&(this.xVelocity+=this.accelerateFactor),"kiri"!=window.value||0!==this.xVelocity||this.isLeftWall||(this.xVelocity-=this.accelerateFactor,this.isRightWall=!1),"kiri"==window.value&&Math.abs(this.xVelocity)<=this.maxVelocity&&(this.xVelocity-=this.accelerateFactor)},Spacecraft.prototype.updateShield=function(i){this.isShieldAnimating&&!this.isShieldUp?(this.shieldDelayTimer+=i,this.isShieldUpAudio||(this.assetsManager.audios.shieldUp.play(),this.assetsManager.audios.shieldUp.currentTime=0,this.isShieldUpAudio=!0),this.shieldDelayTimer>500&&(this.shieldIndex<3?this.shieldIndex++:(this.isShieldUp=!0,this.isShieldAnimating=!1),this.shieldDelayTimer=0)):this.isShieldAnimating&&this.isShieldUp?(this.shieldDelayTimer+=i,this.isShieldDownAudio||(this.assetsManager.audios.shieldDown.play(),this.assetsManager.audios.shieldDown.currentTime=0,this.isShieldDownAudio=!0),this.shieldDelayTimer>500&&(this.shieldIndex>0?this.shieldIndex--:(this.isShieldUp=!1,this.isShieldAnimating=!1),this.shieldDelayTimer=0)):this.isShieldUp&&(this.shieldDelayTimer+=i,(this.isShieldDownAudio||this.isShieldUpAudio)&&(this.isShieldDownAudio=!1,this.isShieldUpAudio=!1),this.shieldDelayTimer>this.shieldDuriation&&(this.isShieldAnimating=!0,this.shieldDelayTimer=0))},Spacecraft.prototype.updateBolt=function(i){this.isBoltPower&&(this.boltTimer+=i,this.boltTimer>this.boltDuration&&(this.isBoltPower=!1,this.boltTimer=0))},Spacecraft.prototype.fire=function(i){"blue"===i||"green"===i?(this.bullets.push(new Bullet(this.xPosition+this.width/2-7,this.yPosition,i,this.assetsManager)),this.assetsManager.audios.laserPlayer.play(),this.assetsManager.audios.laserPlayer.currentTime=0):console.error(i+" is not an appropriate color to fire a bullet!")},Spacecraft.prototype.shieldUp=function(){this.isShieldUp?(this.shieldDelayTimer=0,this.isShieldAnimating=!1):this.isShieldAnimating=!0},Spacecraft.prototype.boltPowerUp=function(){this.isBoltPower?this.boltTimer=0:this.isBoltPower=!0};